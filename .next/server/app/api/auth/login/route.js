"use strict";(()=>{var e={};e.id=873,e.ids=[873],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},4770:e=>{e.exports=require("crypto")},2638:(e,r,t)=>{t.r(r),t.d(r,{originalPathname:()=>h,patchFetch:()=>x,requestAsyncStorage:()=>c,routeModule:()=>l,serverHooks:()=>g,staticGenerationAsyncStorage:()=>m});var o={};t.r(o),t.d(o,{POST:()=>d});var s=t(9303),a=t(8716),n=t(670),i=t(7070),u=t(9487),p=t(8691);async function d(e){try{let{email:r,password:t}=await e.json();if(!r||!t)return i.NextResponse.json({error:"Email and password are required"},{status:400});let[o]=await (0,u.i)`SELECT id, name, email, password FROM users WHERE email = ${r}`;if(!o||!await p.ZP.compare(t,o.password))return i.NextResponse.json({error:"Invalid credentials"},{status:401});let s=`token_${o.id}_${Date.now()}`,{password:a,...n}=o;return i.NextResponse.json({user:n,token:s,message:"Login successful"})}catch(e){return console.error("Login error:",e),i.NextResponse.json({error:"Internal server error"},{status:500})}}let l=new s.AppRouteRouteModule({definition:{kind:a.x.APP_ROUTE,page:"/api/auth/login/route",pathname:"/api/auth/login",filename:"route",bundlePath:"app/api/auth/login/route"},resolvedPagePath:"D:\\Projects\\SkyBooker\\app\\api\\auth\\login\\route.ts",nextConfigOutput:"",userland:o}),{requestAsyncStorage:c,staticGenerationAsyncStorage:m,serverHooks:g}=l,h="/api/auth/login/route";function x(){return(0,n.patchFetch)({serverHooks:g,staticGenerationAsyncStorage:m})}},9487:(e,r,t)=>{t.d(r,{i:()=>o});let o=(0,t(2237).qn)(process.env.DATABASE_URL)}};var r=require("../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),o=r.X(0,[276,972,237,691],()=>t(2638));module.exports=o})();